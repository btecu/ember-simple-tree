{{#if hasBlock}}
  {{#x-tree-node
    checkable=checkable
    recursiveCheck=recursiveCheck
    updateCheckbox=(action "updateCheckbox")
    chosenId=chosenId
    onCheck=onCheck
    onContextMenu=onContextMenu
    onSelect=onSelect
    onHover=onHover
    onHoverOut=onHoverOut
    model=model
    expandedIcon=expandedIcon
    collapsedIcon=collapsedIcon
    as |node|
  }}
    {{yield node}}
  {{/x-tree-node}}

  {{#if model.isExpanded}}
    {{#if renderChildren}}
      {{#x-tree-branch
        checkable=checkable
        lazyRenderChildren=lazyRenderChildren
        recursiveCheck=recursiveCheck
        updateCheckbox=(action "updateCheckbox")
        chosenId=chosenId
        onCheck=onCheck
        onContextMenu=onContextMenu
        onSelect=onSelect
        onHover=onHover
        onHoverOut=onHoverOut
        model=model.children
        expandedIcon=expandedIcon
        collapsedIcon=collapsedIcon
        as |node|
      }}
        {{yield node}}
      {{/x-tree-branch}}
    {{/if}}
  {{/if}}
{{else}}
  {{x-tree-node
    model=model
    checkable=checkable
    recursiveCheck=recursiveCheck
    updateCheckbox=(action "updateCheckbox")
    chosenId=chosenId
    onCheck=onCheck
    onContextMenu=onContextMenu
    onSelect=onSelect
    onHover=onHover
    onHoverOut=onHoverOut
    expandedIcon=expandedIcon
    collapsedIcon=collapsedIcon
  }}
  {{#if model.isExpanded}}
    {{#if renderChildren}}
      {{x-tree-branch
        model=model.children
        checkable=checkable
        lazyRenderChildren=lazyRenderChildren
        recursiveCheck=recursiveCheck
        updateCheckbox=(action "updateCheckbox")
        chosenId=chosenId
        onCheck=onCheck
        onContextMenu=onContextMenu
        onSelect=onSelect
        onHover=onHover
        onHoverOut=onHoverOut
        expandedIcon=expandedIcon
        collapsedIcon=collapsedIcon
      }}
    {{/if}}
  {{/if}}
{{/if}}
