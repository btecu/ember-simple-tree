{"version":3,"file":"x-tree-node.js","sources":["../../src/components/x-tree-node.js"],"sourcesContent":["import Component from '@glimmer/component';\nimport { action, set, setProperties } from '@ember/object';\n\nexport default class TreeNodeComponent extends Component {\n  get classes() {\n    let classes = [];\n    let { isDisabled, isSelected, id, children } = this.args.model;\n\n    if (isDisabled) {\n      classes.push('tree-disabled');\n    }\n\n    if (isSelected) {\n      classes.push('tree-highlight');\n    }\n\n    if (id === this.args.chosenId) {\n      classes.push('tree-chosen');\n    }\n\n    if (children?.length > 0) {\n      classes.push('tree-children');\n    }\n\n    return classes.join(' ');\n  }\n\n  @action\n  click() {\n    if (this.args.onSelect && !this.args.model.isDisabled) {\n      let wasChecked = this.args.model.isChecked;\n\n      this.args.onSelect(this.args.model);\n\n      let { isChecked } = this.args.model;\n      if (isChecked !== wasChecked && this.args.recursiveCheck) {\n        this.setChildCheckboxesRecursively(this.args.model, isChecked);\n        this.updateCheckbox();\n      }\n    }\n  }\n\n  @action\n  contextMenu(event) {\n    if (this.args.onContextMenu) {\n      event.preventDefault();\n      this.args.onContextMenu(this.args.model);\n    }\n  }\n\n  @action\n  mouseEnter() {\n    if (!this.args.model.isDisabled) {\n      set(this.args.model, 'isSelected', true);\n    }\n\n    if (this.args.onHover) {\n      this.args.onHover(this.args.model);\n    }\n  }\n\n  @action\n  mouseLeave() {\n    set(this.args.model, 'isSelected', false);\n\n    if (this.args.onHoverOut) {\n      this.args.onHoverOut(this.model);\n    }\n  }\n\n  @action\n  toggleCheck(event) {\n    event.stopPropagation();\n\n    if (!this.args.model.isDisabled) {\n      let isChecked = set(this.args.model, 'isChecked', !this.args.model.isChecked);\n\n      if (this.args.recursiveCheck) {\n        this.setChildCheckboxesRecursively(this.args.model, isChecked);\n        this.args.updateCheckbox();\n      }\n\n      if (this.args.onCheck) {\n        this.args.onCheck(this.model);\n      }\n    }\n  }\n\n  @action\n  toggleExpand(event) {\n    event.stopPropagation();\n    set(this.args.model, 'isExpanded', !this.args.model.isExpanded);\n  }\n\n  setChildCheckboxesRecursively(node, isChecked) {\n    if (node.children.length) {\n      for (let child of node.children) {\n        setProperties(child, {\n          isChecked,\n          isIndeterminate: false,\n        });\n\n        this.setChildCheckboxesRecursively(child, isChecked);\n      }\n    }\n  }\n}\n"],"names":["TreeNodeComponent","Component","classes","isDisabled","isSelected","id","children","args","model","push","chosenId","length","join","click","onSelect","wasChecked","isChecked","recursiveCheck","setChildCheckboxesRecursively","updateCheckbox","n","prototype","action","contextMenu","event","onContextMenu","preventDefault","mouseEnter","set","onHover","mouseLeave","onHoverOut","toggleCheck","stopPropagation","onCheck","toggleExpand","isExpanded","node","child","setProperties","isIndeterminate","setComponentTemplate","TEMPLATE"],"mappings":"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"}